---
import "../styles/global.css";
---

<header>
  <a href="/" class="logo">LOGO</a>
  <nav>
    <ul>
      <li><a href="/">HOME</a></li>
      <li><a href="/blog">BLOG</a></li>
      <li><a href="/apps">APPS</a></li>
    </ul>
  </nav>
  <div class="header-right-container">
    <button
      id="themeToggle"
      class="dark-mode-toggle"
      aria-label="toggle dark mode"
      ><svg
        xmlns="http://www.w3.org/2000/svg"
        width="24px"
        height="24px"
        viewBox="0 0 24 24"
        ><g fill="none"
          ><circle cx="12" cy="12" r="8.5" stroke="var(--text)"></circle><path
            fill="var(--text)"
            d="M16.243 7.757a6 6 0 1 0-8.486 8.486L12 12z"></path></g
        ></svg
      ></button
    >
    <button class="login"><a href="/login">LOGIN</a></button>
  </div>
</header>

<style>
  header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    height: 40px;
    font-size: 20px;
    padding-left: 8px;
    padding-right: 8px;
    top: 0;
    position: sticky;
    background: var(--bg-base);
    z-index: 1;
  }

  .logo {
    color: var(--text);
  }

  ul {
    display: flex;
    gap: 14px;
    cursor: pointer;
  }

  ul a {
    color: var(--text);
  }

  .header-right-container {
    display: flex;
    align-items: center;
  }

  .dark-mode-toggle {
    background: transparent;
    border: none;
    outline: none;
    cursor: pointer;
  }

  .login {
    color: var(--text);
    background: transparent;
    border: none;
    cursor: pointer;
  }

  .login a {
    color: var(--text);
  }
</style>

<script is:inline>
  document.addEventListener("astro:page-load", () => {
    const theme = (() => {
      if (
        typeof localStorage !== "undefined" &&
        localStorage.getItem("theme")
      ) {
        return localStorage.getItem("theme");
      }
      if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
        return "dark";
      }
      return "light";
    })();

    if (theme === "light") {
      document.documentElement.classList.remove("dark");
    } else {
      document.documentElement.classList.add("dark");
    }

    window.localStorage.setItem("theme", theme);

    const handleToggleClick = () => {
      const element = document.documentElement;
      element.classList.toggle("dark");

      const isDark = element.classList.contains("dark");
      localStorage.setItem("theme", isDark ? "dark" : "light");
    };

    document
      .getElementById("themeToggle")
      .addEventListener("click", handleToggleClick);
  });
</script>
